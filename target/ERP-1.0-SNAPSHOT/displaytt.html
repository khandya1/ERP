<!DOCTYPE html>
<html>
<style>
    table,th,td {
        border : 1px solid black;
        border-collapse: collapse;
    }
    th,td {
        padding: 5px;
    }
</style>
<title>TimeTable</title>
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.68/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.68/vfs_fonts.js"></script>
</head>
<body>

<h2>TimeTable</h2>

<br>
<div id= "box"></div>

<button onclick="getvalueofradiolist()" type="submit">Try it</button>

<div id= "box1"></div>

<script>
    let x;
    async function function1 () {

        // e.preventDefault();
        // e.stopPropagation();

        let response = await fetch('http://localhost:8080/ERP_war_exploded/api/courses/display', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json;charset=utf-8'
            },
        });
        try {
            let result = await response.json();
            let html = "<table border='1|1' id ='t1'>";
            //let x=JSON.stringify(result);
            //console.log(x);
            for (let i = 0; i < result.length; i++) {
                console.log(result[i].name);
                html += "<tr>";
                x = result[i].course_id;
                console.log(x);
                html += "<td><input type=radio id ='choiceLabel' name =course value =" + x + "></td>";
                html += "<td>" + result[i].course_id + "</td>";
                html += "<td>" + result[i].capacity + "</td>";
                html += "<td>" + result[i].course_code + "</td>";
                html += "<td>" + result[i].credits + "</td>";
                html += "<td>" + result[i].description + "</td>";
                html += "<td>" + result[i].faculty + "</td>";
                html += "<td>" + result[i].name + "</td>";
                html += "<td>" + result[i].term + "</td>";
                html += "<td>" + result[i].year + "</td>";


                html += "</tr>";

            }
            html += "</table>";

            document.getElementById("box").innerHTML = html;

            // document.addEventListener('DOMContentLoaded', function() {

        }
        catch
            (err)
        {

        }
        // let button = document.createElement('button');
        // button.type = 'button';
        // button.innerHTML = 'Press me';
        // button.className = 'btn-styled';
        //
        // button.onclick = getvalueofradiolist;

    }

    async function getvalueofradiolist() {

        let radioButtonlist = document.getElementsByName("course");
        for (let x = 0; x < radioButtonlist.length; x++) {
            if (radioButtonlist[x].checked) {
                alert("Selected item Value "  + radioButtonlist[x].value);
                document.getElementById("box").style.display="none";
                var p =radioButtonlist[x].value;
                function2(radioButtonlist[x].value);
            }
        }

    }


    async function function3(p) {
        // e.preventDefault();
        // e.stopPropagation();
       // let y = document.querySelector('input[name ="course"]:checked').value;
        console.log(p);
     //   console.log(y);
        let r_courseSch = await fetch('http://localhost:8080/ERP_war_exploded/api/courseschedule/display', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json;charset=utf-8'
            },
        });
        try {
            let result_cs = await r_courseSch.json();
            let html1 = "<table border='1|1'>";
            //let x=JSON.stringify(result);
            //console.log(x);
            for (let i = 0; i < result_cs.length; i++) {
                console.log(result_cs[i].building);
                html1 += "<tr>";
                html1 += "<td>" + result_cs[i].id + "</td>";
                html1 += "<td>" + result_cs[i].building + "</td>";
                html1 += "<td>" + result_cs[i].room + "</td>";
                html1 += "<td>" + result_cs[i].time + "</td>";
                html1 += "<td>" + result_cs[i].day + "</td>";
                html1 += "<td>" + result_cs[i].course.course_id + "</td>";
                html1 += "<td>" + result_cs[i].course.name + "</td>";
            //    html1 += "<td>" + result_cs[i].course.domain.domain_id + "</td>";

                html1 += "</tr>";

            }
            html1 += "</table>";

            document.getElementById("box1").innerHTML = html1;

        } catch (err) {

        }
    }

    async function function2(p) {

        // let y = document.querySelector('input[name ="course"]:checked').value;
        console.log(p);
        //   console.log(y);
        // p.addEventListener( 'submit', async (e) => {
        //
        //     e.preventDefault();
        //     e.stopPropagation();

        let r_courseSch = await fetch('http://localhost:8080/ERP_war_exploded/api/courseschedule/checkCourse', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json;charset=utf-8'
            },
            body: JSON.stringify({
                course_id: p }),
        });
        try {
            let result_cs = await r_courseSch.json();
            let html1 = "<table border='1|1'>";
            //let x=JSON.stringify(result);
            //console.log(x);
            for (let i = 0; i < result_cs.length; i++) {
                console.log(result_cs[i].building);
                html1 += "<tr>";
                html1 += "<td>" + result_cs[i].id + "</td>";
                html1 += "<td>" + result_cs[i].building + "</td>";
                html1 += "<td>" + result_cs[i].room + "</td>";
                html1 += "<td>" + result_cs[i].time + "</td>";
                html1 += "<td>" + result_cs[i].day + "</td>";
                html1 += "<td>" + result_cs[i].course.course_id + "</td>";
                html1 += "<td>" + result_cs[i].course.name + "</td>";
                //    html1 += "<td>" + result_cs[i].course.domain.domain_id + "</td>";

                html1 += "</tr>";

            }
            html1 += "</table>";

            document.getElementById("box1").innerHTML = html1;

        } catch (err) {

        }
 //   });
    }



    function start() {
        function1();
    }
    window.onload = start;





    // let docDef = {
    //     content: [
    //         {
    //             layout: 'lightHorizontalLines', // optional
    //             table: {
    //                 // headers are automatically repeated if the table spans over multiple pages
    //                 // you can declare how many rows should be treated as headers
    //                 headerRows: 1,
    //                 widths: [ '*', 'auto', 100, '*' ],
    //
    //                 body: [
    //                     [ "result[0].name", 'Second', 'Third', 'The last one' ],
    //                     [ 'Value 1', 'Value 2', 'Value 3', 'Value 4' ],
    //                     [ { text: 'Bold value', bold: true }, 'Val 2', 'Val 3', 'Val 4' ]
    //                 ]
    //             }
    //         }
    //     ]
    //
    // }
    // pdfMake.createPdf(docDef).download();

</script>


</body>
</html>
